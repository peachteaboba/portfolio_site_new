/**
 * Created by peachteaboba on 8/24/17.
 */

// ---------------------------------------------------------------
// ------------------------------------------------------- Require
// ---------------------------------------------------------------
let express = require('express');
let port = process.env.PORT || 9000;
let path = require('path');
let bodyParser = require('body-parser');
const http = require('http');
require('colors');

// ---------------------------------------------------------------
// --------------------------------------------------------- Setup
// ---------------------------------------------------------------
let app = express();
app.use(bodyParser.urlencoded({ extended: true }));
app.use(bodyParser.json({limit: '100mb'}));
app.use(bodyParser.urlencoded({limit: '100mb', extended: true, parameterLimit: 1000000}));
app.use(express.static(path.join(__dirname, '/client')));
app.use(express.static("./bower_components"));

// ---------------------------------------------------------------
// ------------------------------------------------------ Database
// ---------------------------------------------------------------
require('./server/config/mongoose');

// ---------------------------------------------------------------
// -------------------------------------------------------- Routes
// ---------------------------------------------------------------
require('./server/config/routes')(app);

// ---------------------------------------------------------------
// -------------------------------------------------------- Listen
// ---------------------------------------------------------------
server = http.createServer(app).listen(port, function () {
    console.log("-----------------------------------------------------------".blue);
    console.log("------------ It's over port: 9000!!! ( http ) -------------".blue);
    console.log("-----------------------------------------------------------".blue);
});